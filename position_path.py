import pyodrivecan
import asyncio
from datetime import datetime, timedelta


nodeID_1_pos = [
'-0.06793537', '-0.02272718', '0.01171716', '0.04616150', '0.08060584', '0.11505018', '0.14776279', '0.17206410', '0.18498544', '0.18949549', '0.19227380', '0.19505212', '0.19783043', '0.20060875', '0.20327690', '0.20541001', '0.20681923', '0.20769340', '0.20845741', '0.20922142', '0.20998544', '0.21074945', '0.21147540', '0.21201652', '0.21230754', '0.21241373', '0.21248186', '0.21254998', '0.21261811', '0.21268624', '0.21275318', '0.21281434', '0.21286770', '0.21291527', '0.21296166', '0.21300805', '0.21305443', '0.21310082', '0.21314552', '0.21318200', '0.21320736', '0.21322452', '0.21323998', '0.21325544', '0.21327090', '0.21328636', '0.21330190', '0.21331788', '0.21333442', '0.21335140', '0.21336846', '0.21338552', '0.21340258', '0.21341965', '0.21344054', '0.21348003', '0.21354468', '0.21362793', '0.21371502', '0.21380210', '0.21388918', '0.21397626', '0.21407401', '0.21422357', '0.21444322', '0.21471468', '0.21499680', '0.21527892', '0.21556105', '0.21584317', '0.21611364', '0.21632747', '0.21646468', '0.21654527', '0.21661419', '0.21668312', '0.21675204', '0.21682097', '0.21688674', '0.21693720', '0.21696693', '0.21698135', '0.21699262', '0.21700388', '0.21701515', '0.21702641', '0.21703657', '0.21704136', '0.21703887', '0.21703102', '0.21702205', '0.21701309', '0.21700413', '0.21699516', '0.21696024', '0.21679921', '0.21646756', '0.21600981', '0.21552610', '0.21504238', '0.21455867', '0.21407495', '0.21320811', '0.21048034', '0.20523485', '0.19812843', '0.19063888', '0.18314934', 
'0.17565979', '0.16817024', '0.16015768', '0.14960476', '0.13561488', '0.11908464', '0.10203139', '0.08497813', '0.06792488', '0.05087163', '0.03371482', '0.01605507', '-0.00228514', '-0.02112830', '-0.04007502', '-0.05902173', '-0.07796844', '-0.09691515', '-0.11600043', '-0.13575875', '-0.15642765', 
'-0.17776960', '-0.19925012', '-0.22073063', '-0.24221115', '-0.26369166', '-0.28482235', '-0.30425384', '-0.32138644', '-0.33681985', '-0.35190343', '-0.36698700', '-0.38207058', '-0.39715416', '-0.41272962', '-0.43069422', '-0.45189119', '-0.47547729', '-0.49955528', '-0.52363327', '-0.54771126', '-0.57178925', '-0.59586521', '-0.61993133', '-0.64398413', '-0.66802709', '-0.69206802', '-0.71610895', '-0.74014988', '-0.76419081', '-0.78953693', '-0.82122256', '-0.86148517', '-0.90808728', '-0.95599459', '-1.00390190', '-1.05180921', '-1.09971651', '-1.14717155', '-1.19242983', '-1.23471604', '-1.27480549', '-1.31444266', '-1.35407984', '-1.39371702', '-1.43335420', '-1.47212904', '-1.50671537', '-1.53563490', '-1.56036592', '-1.58423460', '-1.60810328', '-1.63197196', '-1.65584064', '-1.67972718', '-1.70370051', '-1.72779123', '-1.75196874', '-1.77616411', '-1.80035949', '-1.82455486', '-1.84875023', '-1.87287158', '-1.89663339', '-1.91990877', '-1.94282460', '-1.96566641', '-1.98850822', '-2.01135004', '-2.03419185', '-2.05626836', '-2.07462773', '-2.08795801', '-2.09757113', '-2.10641897', '-2.11526680', '-2.12411463', '-2.13296247', '-2.14140237', '-2.14786088', '-2.15163869', '-2.15343511', '-2.15482360', '-2.15621209', '-2.15760058', '-2.15898907', '-2.16031975', '-2.16136963', '-2.16203961', '-2.16242880', '-2.16276017', '-2.16309154', '-2.16342291', '-2.16375428', '-2.16417684', '-2.16504231', '-2.16650700', '-2.16841459', '-2.17041337', '-2.17241216', '-2.17441094', '-2.17640972', 
'-2.17838028', '-2.18021378', '-2.18186182', '-2.18337280', '-2.18485555', '-2.18633831', '-2.18782106', '-2.18930382', '-2.19074477', '-2.19198266', '-2.19294585', '-2.19370598', '-2.19442430', '-2.19514263', '-2.19586095', '-2.19657928', '-2.19725551', '-2.19772727', '-2.19792239', '-2.19791305', '-2.19786161', '-2.19781017', '-2.19775873', '-2.19770730', '-2.19772537', '-2.19808107', '-2.19889356', '-2.20004368', '-2.20126331', '-2.20248294', '-2.20370257', '-2.20492220', '-2.20608677', '-2.20698393', '-2.20751928', '-2.20778722', '-2.20800009', '-2.20821297', '-2.20842585', '-2.20863873', '-2.20870398', '-2.20805221', '-2.20643033', '-2.20409143', '-2.20160490', '-2.19911838', '-2.19663185', '-2.19414532', '-2.19129568', '-2.18668235', '-2.17968285', '-2.17091966', '-2.16179335', '-2.15266705', '-2.14354074', '-2.13441443', '-2.12477520', '-2.11264460', '-2.09714332', '-2.07915068', '-2.06064510', '-2.04213953', '-2.02363396', '-2.00512838', '-1.98686213', '-1.96975831', '-1.95422719', '-1.93985850', '-1.92572913', '-1.91159976', '-1.89747038', '-1.88334101', '-1.86967118', '-1.85823341', '-1.84981548', '-1.84362960', '-1.83790326', '-1.83217692', '-1.82645059', '-1.82072425', '-1.81496757', '-1.80906354', '-1.80296014', '-1.79670939', '-1.79042830', '-1.78414720', '-1.77786611', '-1.77158502', '-1.76515819', '-1.75802348', '-1.74993106', '-1.74113077', '-1.73218474', '-1.72323871', '-1.71429268', '-1.70534664', '-1.69533036', '-1.68011572', '-1.65786799', '-1.63042191', '-1.60190557', 
'-1.57338923', '-1.54487289', '-1.51635656', '-1.48912143', '-1.46810932', '-1.45551660', '-1.44914690', '-1.44405840', '-1.43896991', '-1.43388142', '-1.42879292', '-1.42395861', '-1.42035888', '-1.41842946', '-1.41773462', '-1.41729397', '-1.41685331', '-1.41641265', '-1.41597199', '-1.41553197', '-1.41509504', '-1.41466230', '-1.41423264', '-1.41380362', '-1.41337460', '-1.41294558', '-1.41251656', '-1.41208820', '-1.41166302', '-1.41124216', '-1.41082448', '-1.41040745', '-1.40999043', '-1.40957341', '-1.40915638', '-1.40874287', '-1.40834643', '-1.40797308', '-1.40761679', '-1.40726402', '-1.40691125', '-1.40655848', '-1.40620571', '-1.40586284', '-1.40556803', '-1.40533824', '-1.40515652', '-1.40498470', '-1.40481287', '-1.40464105', '-1.40446922', '-1.40429792', '-1.40412914', '-1.40396379', '-1.40380096', '-1.40363866', '-1.40347636', '-1.40331405', '-1.40315175', '-1.40298537', '-1.40279920', '-1.40258626', '-1.40235353', '-1.40211672', '-1.40187991', '-1.40164310', '-1.40140629', '-1.40117609', '-1.40097797', '-1.40082327', '-1.40070066', '-1.40058465', '-1.40046865', '-1.40035264', '-1.40023664', '-1.40012153', '-1.40001079', '-1.39990595', '-1.39980549', '-1.39970592', '-1.39960635', '-1.39950678', '-1.39940721', '-1.39930958', '-1.39922137', '-1.39914590', '-1.39907986', '-1.39901575', '-1.39895165', '-1.39888754', '-1.39882344', '-1.39875964', '-1.39869734', '-1.39863707', '-1.39857829', '-1.39851981', '-1.39846134', '-1.39840287', '-1.39834440', '-1.39828742', '-1.39823771', 
'-1.39819784', '-1.39816523', '-1.39813411', '-1.39810300', '-1.39807189', '-1.39804077', '-1.39800894', '-1.39797362', '-1.39793357', '-1.39789003', '-1.39784577', '-1.39780152', '-1.39775726', '-1.39771301', '-1.39766971', '-1.39763111', '-1.39759884', '-1.39757127', '-1.39754465', '-1.39751804', '-1.39749143', '-1.39746481', '-1.39743860', '-1.39741437', '-1.39739280', '-1.39737320', '-1.39735401', '-1.39733481', '-1.39731562', '-1.39729643', '-1.39727718', '-1.39725766', '-1.39723777', '-1.39721760', '-1.39719738', '-1.39717716', '-1.39715694', '-1.39713672', '-1.39711675', '-1.39709803', '-1.39708099', '-1.39706519', '-1.39704965', '-1.39703411', '-1.39701857', '-1.39700302', '-1.39698635', '-1.39696417', '-1.39693454', '-1.39689940', '-1.39686313', '-1.39682686', '-1.39679059', '-1.39675432', '-1.39671894', '-1.39668782', '-1.39666249', '-1.39664143', '-1.39662126', '-1.39660108', '-1.39658090', '-1.39656073', '-1.39654098', '-1.39652333', '-1.39650851', '-1.39649579', '-1.39648350', '-1.39647120', '-1.39645891', '-1.39644662', '-1.39643326', '-1.39641477', '-1.39638932', '-1.39635873', '-1.39632708', '-1.39629543', '-1.39626378', '-1.39623213', '-1.39620121', '-1.39617386', '-1.39615134', '-1.39613238', '-1.39611416', '-1.39609593', '-1.39607771', '-1.39605948', '-1.39594910', '-1.39539110', '-1.39422750', '-1.39261627', '-1.39091289', '-1.38920951', '-1.38750613', '-1.38580275', '-1.38342029', '-1.37773946', '-1.36759613', '-1.35415444', '-1.34003367', '-1.32591289', '-1.31179212', 
'-1.29767135', '-1.28106461', '-1.25238319', '-1.20736542', '-1.15027297', '-1.09069455', '-1.03111613', '-0.97153771', '-0.91195929', '-0.84826725', '-0.76459474', '-0.65388983', '-0.52320446', '-0.38840546', '-0.25360647', '-0.11880747', '0.01599152', '0.14530178', '0.24795245', '0.31453427', '0.35445650', '0.38888999', '0.42332348', '0.45775697', '0.49219047', '0.52480277', '0.54856928', '0.56036796', '0.56332086', '0.56445257', '0.56558427', '0.56671598', '0.56784768', '0.56841779', '0.56626011', '0.56041190', '0.55183590', '0.54269831', '0.53356071', '0.52442311', '0.51528551', '0.50532284', '0.49135264', '0.47196050', '0.44856084', '0.42433610', '0.40011136', '0.37588662', '0.35166188', '0.32732413', '0.30243748', '0.27680820', '0.25063001', '0.22433881', '0.19804761', '0.17175641', '0.14546521', '0.11920112', '0.09306872', '0.06711448', '0.04129192', '0.01549648', '-0.01029897', '-0.03609441', '-0.06188986', '-0.08759346', '-0.11285098', '-0.13750498', '-0.16171290', '-0.18582898', '-0.20994505', '-0.23406113', '-0.25817721', '-0.28192643', '-0.30389383', '-0.32345051', '-0.34122536', '-0.35863335', '-0.37604135', '-0.39344935', '-0.41085735', '-0.42850240', '-0.44729883', '-0.46765302', '-0.48915860', '-0.51090123', '-0.53264385', '-0.55438648', '-0.57612911', '-0.59771034', '-0.61850765', '-0.63824437', '-0.65719716', '-0.67598856', '-0.69477996', '-0.71357136', '-0.73236276', '-0.75235988', '-0.77821333', '-0.81199005', '-0.85162310', '-0.89246187', '-0.93330064', '-0.97413941', 
'-1.01497819', '-1.05500048', '-1.09105704', '-1.12174818', '-1.14847359', '-1.17438252', '-1.20029145', '-1.22620039', '-1.25210932', '-1.27747466', '-1.30019968', '-1.31935252', '-1.33586505', '-1.35183398', '-1.36780292', '-1.38377185', '-1.39974079', '-1.41599438', '-1.43363062', '-1.45313749', '-1.47402701', '-1.49520119', '-1.51637536', '-1.53754954', '-1.55872372', '-1.57904109', '-1.59519682', '-1.60572211', '-1.61208576', '-1.61759260', '-1.62309945', '-1.62860629', '-1.63411313', '-1.63935863', '-1.64333470', '-1.64559333', '-1.64658254', '-1.64731041', '-1.64803827', '-1.64876613', '-1.64949399', '-1.65018601', '-1.65070394', '-1.65098632', '-1.65109462', '-1.65116706', '-1.65123951', '-1.65131196', '-1.65138441', '-1.65145139', '-1.65149179', '-1.65149623', '-1.65147409', '-1.65144648', '-1.65141886', '-1.65139125', '-1.65136364', '-1.65133320', '-1.65128899', '-1.65122616', '-1.65114957', '-1.65107015', '-1.65099072', '-1.65091130', '-1.65083188', '-1.65074598', '-1.65062862', '-1.65046871', '-1.65027735', '-1.65007950', '-1.64988166', '-1.64968382', '-1.64948598', '-1.64925571', '-1.64886799', '-1.64826723', '-1.64750901', '-1.64671837', '-1.64592773', '-1.64513709', '-1.64434645', '-1.64357916', '-1.64292531', '-1.64242495', '-1.64203802', '-1.64167444', '-1.64131087', '-1.64094730', '-1.64058372', '-1.64016685', '-1.63949110', '-1.63846509', '-1.63718021', '-1.63584203', '-1.63450384', '-1.63316566', '-1.63182747', '-1.63026527', '-1.62761499', '-1.62349261', '-1.61828214', 
'-1.61284766', '-1.60741317', '-1.60197869', '-1.59654421', '-1.59117229', '-1.58610426', '-1.58144739', '-1.57709441', '-1.57280399', '-1.56851357', '-1.56422316', '-1.55993274', '-1.55583262', '-1.55265678', '-1.55073146', '-1.54973042', '-1.54891968', '-1.54810894', '-1.54729819', '-1.54648745', '-1.54569864', '-1.54501637', '-1.54447822', '-1.54404661', '-1.54363693', '-1.54322726', '-1.54281758', '-1.54240790', '-1.54201473', '-1.54170172', '-1.54149716', '-1.54137278', '-1.54126489', '-1.54115701', '-1.54104912', '-1.54094124', '-1.54083368', '-1.54072773', '-1.54062395', '-1.54052177', '-1.54041992', '-1.54031807', '-1.54021622', '-1.54011437', '-1.54001487', '-1.53992677', '-1.53985410', '-1.53979284', '-1.53973392', '-1.53967500', '-1.53961608', '-1.53955716', '-1.53950024', '-1.53945307', '-1.53941906', '-1.53939480', '-1.53937253', '-1.53935027', '-1.53932801', '-1.53930575', '-1.53928339', '-1.53926060', '-1.53923720', '-1.53921336', '-1.53918943', '-1.53916550', '-1.53914157', '-1.53911763', '-1.53909350', '-1.53906836', '-1.53904186', '-1.53901437', '-1.53898667', '-1.53895897', '-1.53893127', '-1.53890356', '-1.53887580', '-1.53884772', '-1.53881922', '-1.53879040', '-1.53876153', '-1.53873265', '-1.53870377', '-1.53867489', '-1.53864605', '-1.53861736', '-1.53858890', '-1.53856060', '-1.53853233', '-1.53850406', '-1.53847580', '-1.53844753', '-1.53841934', '-1.53839153', '-1.53836424', '-1.53833732', '-1.53831048', '-1.53828365', '-1.53825681', '-1.53822997', '-1.53820421', 
'-1.53818367', '-1.53817019', '-1.53816193', '-1.53815475', '-1.53814757', '-1.53814039', '-1.53813320', '-1.53812420', '-1.53810632', '-1.53807644', '-1.53803769', '-1.53799711', '-1.53795654', '-1.53791596', '-1.53787538', '-1.53783122', '-1.53776966', '-1.53768454', '-1.53758201', '-1.53747590', '-1.53736979', '-1.53726368', '-1.53715757', '-1.53705143', '-1.53694518', '-1.53683876', '-1.53673223', '-1.53662567', '-1.53651911', '-1.53641255', '-1.53630599', '-1.53619952', '-1.53609344', '-1.53598791', '-1.53588277', '-1.53577772', '-1.53567266', '-1.53556761', '-1.53546256', '-1.53536251', '-1.53528677', '-1.53524391', '-1.53522536', '-1.53521182', '-1.53519827', '-1.53518473', '-1.53517118', '-1.53515734', '-1.53514209', '-1.53512492', '-1.53510633', '-1.53508745', '-1.53506857', '-1.53504969', '-1.53503081', '-1.53501319', '-1.53500168', '-1.53499844', '-1.53500131', '-1.53500544', '-1.53500956', '-1.53501369', '-1.53501782', '-1.53502139', '-1.53502230', '-1.53501958', '-1.53501418', '-1.53500824', '-1.53500229', '-1.53499635', '-1.53499040', '-1.53498572', '-1.53498717', '-1.53499692', '-1.53501281', '-1.53502996', '-1.53504711', '-1.53506427', '-1.53508142', '-1.53509716', '-1.53510608', '-1.53510576', '-1.53509861', '-1.53509006', '-1.53508151', '-1.53507295', '-1.53506440', '-1.53505716', '-1.53505629', '-1.53506406', '-1.53507820', '-1.53509365', '-1.53510910', '-1.53512456', '-1.53514001', '-1.53515414', '-1.53516183', '-1.53516083', '-1.53515339', '-1.53514463', '-1.53513587', 
'-1.53512710', '-1.53511834', '-1.53511023', '-1.53510527', '-1.53510458', '-1.53510705', '-1.53511016', '-1.53511328', '-1.53511639', '-1.53511950', '-1.53512249', '-1.53512482', '-1.53512629', '-1.53512710', '-1.53512779', '-1.53512847', '-1.53512916', '-1.53512985', '-1.53513106', '-1.53513485', '-1.53514212', '-1.53515196', '-1.53516233', '-1.53517270', '-1.53518307', '-1.53519344', '-1.53520340', '-1.53521133', '-1.53521653', '-1.53521970', '-1.53522246', '-1.53522521', '-1.53522797', '-1.53523073', '-1.53523252', '-1.53522966', '-1.53522050', '-1.53520668', '-1.53519189', '-1.53517711', '-1.53516233', '-1.53514755', '-1.53513454', '-1.53513013', '-1.53513737', '-1.53515321', '-1.53517082', '-1.53518844', '-1.53520605', '-1.53522366', '-1.53524678', '-1.53525889']


nodeID_2_pos = ['0.01521596', '0.01134770', '0.00840045', '0.00545320', '0.00250595', '-0.00044130', '-0.00310440', '-0.00438734', '-0.00380302', '-0.00183854', '0.00041009', '0.00265872', '0.00490735', '0.00715598', '0.00923006', '0.01045631', '0.01053551', '0.00976688', '0.00882369', '0.00788051', '0.00693733', '0.00599414', '0.00511411', '0.00454082', '0.00438253', '0.00453098', '0.00474259', '0.00495419', '0.00516579', '0.00537740', '0.00556957', '0.00566734', '0.00563739', '0.00551304', '0.00536926', '0.00522548', '0.00508170', '0.00493792', '0.00479981', '0.00468928', '0.00461604', '0.00457038', '0.00453039', '0.00449041', '0.00445042', '0.00441043', '0.00437398', '0.00435470', '0.00435866', '0.00437979', '0.00440446', '0.00442913', '0.00445380', '0.00447847', '0.00449913', '0.00450035', '0.00447525', '0.00443070', '0.00438214', '0.00433359', '0.00428503', '0.00423647', '0.00418845', '0.00414304', '0.00410113', '0.00406183', '0.00402307', '0.00398430', '0.00394554', '0.00390677', '0.00386710', '0.00382303', '0.00377301', '0.00371858', '0.00366326', '0.00360793', '0.00355260', '0.00349727', '0.00344042', '0.00337618', '0.00330195', '0.00322032', '0.00313717', '0.00305402', '0.00297087', '0.00288773', '0.00280417', '0.00271863', '0.00263041', '0.00254022', '0.00244961', '0.00235900', '0.00226840', '0.00217779', '0.00208498', '0.00198144', '0.00186340', '0.00173464', '0.00160368', '0.00147271', '0.00134175', '0.00121078', '0.00108324', '0.00097237', '0.00088404', '0.00081238', '0.00074415', '0.00067592', '0.00060768', '0.00053945', '0.00047366', '0.00041975', '0.00038189', '0.00035590', '0.00033236', '0.00030881', '0.00028527', '0.00026172', '0.00023936', '0.00022274', '0.00021389', '0.00021078', '0.00020885', '0.00020692', '0.00020499', '0.00020306', '0.00020169', '0.00020306', '0.00020814', '0.00021595', '0.00022432', '0.00023270', '0.00024107', '0.00024945', '0.00025546', '0.00025003', '0.00022911', '0.00019674', '0.00016201', '0.00012729', '0.00009256', '0.00005783', '0.00002326', '-0.00001057', '-0.00004340', '-0.00007547', '-0.00010740', '-0.00013933', '-0.00017125', '-0.00020318', '-0.00023270', '-0.00025058', '-0.00025270', '-0.00024317', '-0.00023124', '-0.00021932', '-0.00020739', '-0.00019546', '-0.00019313', '-0.00023744', '-0.00034483', '-0.00049886', '-0.00066249', '-0.00082612', '-0.00098975', '-0.00115338', '-0.00130245', '-0.00138080', '-0.00136348', '-0.00127544', '-0.00117283', '-0.00107023', '-0.00096763', '-0.00086503', '-0.00077217', '-0.00072668', '-0.00074525', '-0.00081117', '-0.00088685', '-0.00096253', '-0.00103820', '-0.00111388', '-0.00118506', '-0.00123441', '-0.00125422', '-0.00125220', '-0.00124569', '-0.00123918', '-0.00123267', '-0.00122616', '-0.00122055', '-0.00121936', '-0.00122412', '-0.00123329', '-0.00124338', '-0.00125346', '-0.00126354', '-0.00127362', '-0.00128208', '-0.00128268', '-0.00127265', '-0.00125475', '-0.00123524', '-0.00121573', '-0.00119621', '-0.00117670', '-0.00115790', '-0.00114259', '-0.00113199', '-0.00112487', '-0.00111847', '-0.00111207', '-0.00110567', '-0.00109927', '-0.00109437', '-0.00109673', '-0.00110891', '-0.00112836', '-0.00114930', '-0.00117025', '-0.00119119', '-0.00121213', '-0.00123854', '-0.00129144', '-0.00138022', '-0.00149550', '-0.00161623', '-0.00173697', '-0.00185771', '-0.00197844', '-0.00212057', '-0.00236661', '-0.00275323', '-0.00324376', '-0.00375568', '-0.00426760', '-0.00477953', '-0.00529145', '-0.00578553', '-0.00619294', '-0.00648309', '-0.00668658', '-0.00687223', '-0.00705788', '-0.00724352', '-0.00742917', '-0.00761159', '-0.00777838', '-0.00792400', '-0.00805399', '-0.00818075', '-0.00830752', '-0.00843428', '-0.00856104', '-0.00871706', '-0.00901518', '-0.00950555', '-0.01013802', '-0.01079974', '-0.01146147', '-0.01212319', '-0.01278491', '-0.01342925', '-0.01398916', '-0.01443482', '-0.01479605', '-0.01513989', '-0.01548374', '-0.01582758', '-0.01617143', '-0.01649394', '-0.01671288', '-0.01679168', '-0.01676689', '-0.01672078', '-0.01667467', '-0.01662856', '-0.01658244', '-0.01652416', '-0.01640675', '-0.01620934', '-0.01595281', '-0.01568411', '-0.01541540', '-0.01514670', '-0.01487799', '-0.01452278', '-0.01374741', '-0.01240357', '-0.01063958', '-0.00878908', '-0.00693858', '-0.00508808', '-0.00323758', '-0.00146488', '-0.00007012', '0.00081334', '0.00131887', '0.00174659', '0.00217432', '0.00260204', '0.00302976', '0.00343927', '0.00376029', '0.00396161', '0.00407444', '0.00416905', '0.00426367', '0.00435828', '0.00445290', '0.00454121', '0.00459887', '0.00461509', '0.00460066', '0.00457992', '0.00455919', '0.00453845', '0.00451772', '0.00450241', '0.00451343', '0.00456010', '0.00463310', '0.00471152', '0.00478995', '0.00486837', '0.00494680', '0.00513026', '0.00582394', '0.00720788', '0.00910203', '0.01110122', '0.01310042', '0.01509961', '0.01709880', '0.01904937', '0.02076378', '0.02215868', '0.02331741', '0.02442753', '0.02553764', '0.02664775', '0.02775787', '0.02880558', '0.02955021', '0.02988478', '0.02991627', '0.02988536', '0.02985445', '0.02982353', '0.02979262', '0.02976039', '0.02972175', '0.02967443', '0.02962071', '0.02956566', '0.02951062', '0.02945557', '0.02940053', '0.02934364', '0.02927782', '0.02919991', '0.02911307', '0.02902438', '0.02893570', '0.02884702', '0.02875833', '0.02866270', '0.02853335', '0.02835837', '0.02814966', '0.02793401', '0.02771837', '0.02750272', '0.02728707', '0.02706618', '0.02681986', '0.02653913', '0.02623297', '0.02592158', '0.02561018', '0.02529878', '0.02498738', '0.02467559', '0.02436186', '0.02404552', '0.02372725', '0.02340858', '0.02308992', '0.02277125', '0.02245258', '0.02212128', '0.02172862', '0.02125296', '0.02071594', '0.02016629', '0.01961663', '0.01906698', '0.01851733', '0.01798749', '0.01755387', '0.01725044', '0.01704323', '0.01685584', '0.01666844', '0.01648104', '0.01629364', '0.01610090', '0.01588219', '0.01562834', '0.01534852', '0.01506336', '0.01477820', '0.01449303', '0.01420787', '0.01393144', '0.01369744', '0.01352084', '0.01338667', '0.01326123', '0.01313579', '0.01301035', '0.01288491', '0.01276328', '0.01266009', '0.01258188', '0.01252212', '0.01246615', '0.01241019', '0.01235423', '0.01229827', '0.01224424', '0.01219956', '0.01216756', '0.01214491', '0.01212419', '0.01210347', '0.01208275', '0.01206203', '0.01204135', '0.01202086', '0.01200064', '0.01198061', '0.01196062', '0.01194063', '0.01192064', '0.01190065', '0.01188081', '0.01186174', '0.01184369', '0.01182640', '0.01180926', '0.01179212', '0.01177499', '0.01175785', '0.01174132', '0.01172771', '0.01171806', '0.01171133', '0.01170520', '0.01169908', '0.01169296', '0.01168683', '0.01168071', '0.01167463', '0.01166859', '0.01166259', '0.01165659', '0.01165059', '0.01164459', '0.01163860', '0.01163112', '0.01161643', '0.01159200', '0.01156037', '0.01152725', '0.01149413', '0.01146101', '0.01142789', '0.01139637', '0.01137261', '0.01135934', '0.01135382', '0.01134990', '0.01134598', '0.01134206', '0.01133814', '0.01133331', '0.01132403', '0.01130874', '0.01128900', '0.01126835', '0.01124769', '0.01122704', '0.01120639', '0.01118504', '0.01116035', '0.01113111', '0.01109852', '0.01106524', '0.01103196', '0.01099867', '0.01096539', '0.01093283', '0.01090376', '0.01087942', '0.01085858', '0.01083846', '0.01081833', '0.01079821', '0.01077808', '0.01075653', '0.01072803', '0.01069014', '0.01064530', '0.01059903', '0.01055276', '0.01050650', '0.01046023', '0.01041440', '0.01037069', '0.01032986', '0.01029116', '0.01025289', '0.01021463', '0.01017636', '0.01013809', '0.01020270', '0.01076700', '0.01200735', '0.01374738', '0.01559029', '0.01743320', '0.01927610', '0.02111901', '0.02486889', '0.03788115', '0.06342490', '0.09823103', '0.13494413', '0.17165723', '0.20837034', '0.24508344', '0.28305502', '0.32713922', '0.37949343', '0.43796025', '0.49768556', '0.55741087', '0.61713617', '0.67686148', '0.72907564', '0.74480707', '0.71117953', '0.64106926', '0.56344785', '0.48582643', '0.40820502', '0.33058360', '0.25610612', '0.19689915', '0.15835230', '0.13507597', '0.11494357', '0.09481117', '0.07467877', '0.05454637', '0.03554171', '0.02201461', '0.01589835', '0.01525965', '0.01574869', '0.01623774', '0.01672678', 
'0.01721582', '0.01761760', '0.01759558', '0.01700018', '0.01598096', '0.01487449', '0.01376802', '0.01266155', '0.01155508', '0.01048790', '0.00961160', '0.00899352', '0.00856632', '0.00817841', '0.00779051', '0.00740260', '0.00701469', '0.00664556', '0.00636761', '0.00621303', '0.00614963', '0.00610501', '0.00606039', '0.00601577', '0.00597115', '0.00592474', '0.00586962', '0.00580274', '0.00572716', '0.00564978', '0.00557241', '0.00549503', '0.00541766', '0.00534385', '0.00528734', '0.00525423', '0.00523843', '0.00522619', '0.00521395', '0.00520170', '0.00518946', '0.00516900', '0.00510863', '0.00499425', '0.00483996', '0.00467744', '0.00451493', '0.00435242', '0.00418991', '0.00403710', '0.00393140', '0.00388945', '0.00389461', '0.00390948', '0.00392434', '0.00393920', '0.00395407', '0.00393554', '0.00375484', '0.00335471', '0.00279240', '0.00219671', '0.00160101', '0.00100531', '0.00040962', '-0.00014471', '-0.00049811', '-0.00057968', '-0.00046031', '-0.00029958', '-0.00013885', '0.00002188', '0.00018261', '0.00032393', '0.00037094', '0.00029036', '0.00011548', '-0.00007881', '-0.00027311', '-0.00046740', '-0.00066170', '-0.00084173', '-0.00095249', '-0.00096951', '-0.00091726', '-0.00085074', '-0.00078422', '-0.00071770', '-0.00065118', '-0.00058724', '-0.00053581', '-0.00050132', '-0.00047934', '-0.00045994', '-0.00044054', '-0.00042114', '-0.00040174', '-0.00038370', '-0.00037227', '-0.00036979', '-0.00037391', '-0.00037941', '-0.00038490', '-0.00039039', '-0.00039588', '-0.00040143', '-0.00040728', '-0.00041352', '-0.00042006', '-0.00042666', '-0.00043327', '-0.00043987', '-0.00044647', '-0.00045159', '-0.00044951', '-0.00043769', '-0.00041868', '-0.00039818', '-0.00037768', '-0.00035719', '-0.00033669', '-0.00031792', '-0.00030755', '-0.00030853', '-0.00031790', '-0.00032900', '-0.00034010', '-0.00035121', '-0.00036231', '-0.00037241', '-0.00037768', '-0.00037640', '-0.00037028', '-0.00036316', '-0.00035605', '-0.00034893', '-0.00034182', '-0.00033530', '-0.00033170', '-0.00033204', '-0.00033529', '-0.00033914', '-0.00034299', '-0.00034685', '-0.00035070', '-0.00035526', '-0.00036329', '-0.00037601', '-0.00039218', '-0.00040907', '-0.00042596', '-0.00044286', '-0.00045975', '-0.00047159', '-0.00045890', '-0.00041303', '-0.00034264', '-0.00026719', '-0.00019175', '-0.00011630', '-0.00004086', '0.00002669', '0.00005587', '0.00003315', '-0.00002792', '-0.00009690', '-0.00016588', '-0.00023486', '-0.00030383', '-0.00036393', '-0.00038086', '-0.00033941', '-0.00025481', '-0.00016132', '-0.00006783', '0.00002566', '0.00011915', '0.00020858', '0.00027827', '0.00032127', '0.00034454', '0.00036375', '0.00038296', '0.00040217', '0.00042138', '0.00043530', '0.00042354', '0.00037706', '0.00030489', '0.00022744', '0.00015000', '0.00007255', '-0.00000490', '-0.00007896', '-0.00013657', '-0.00017190', '-0.00019078', '-0.00020627', '-0.00022176', '-0.00023725', '-0.00025274', '-0.00026640', '-0.00027115', '-0.00026387', '-0.00024769', '-0.00022967', '-0.00021166', '-0.00019364', '-0.00017563', '-0.00016116', '-0.00016391', '-0.00018997', '-0.00023326', '-0.00028010', '-0.00032693', '-0.00037377', '-0.00042060', '-0.00046430', '-0.00049277', '-0.00050063', '-0.00049326', '-0.00048275', '-0.00047225', '-0.00046174', '-0.00045124', '-0.00043996', '-0.00042494', '-0.00040485', '-0.00038102', '-0.00035642', '-0.00033182', '-0.00030722', '-0.00028262', '-0.00025694', '-0.00022603', '-0.00018804', '-0.00014482', '-0.00010053', '-0.00005624', '-0.00001194', '0.00003235', '0.00007539', '0.00011236', '0.00014112', '0.00016379', '0.00018522', '0.00020665', '0.00022808', '0.00024951', '0.00026948', '0.00028239', '0.00028576', '0.00028206', '0.00027692', '0.00027177', '0.00026662', '0.00026147', '0.00024972', '0.00020593', '0.00011879', '-0.00000040', '-0.00012619', '-0.00025198', '-0.00037777', '-0.00050355', '-0.00062550', '-0.00072875', '-0.00080671', '-0.00086598', '-0.00092141', 
'-0.00097683', '-0.00103226', '-0.00108768', '-0.00113923', '-0.00117196', '-0.00117922', '-0.00116765', '-0.00115222', '-0.00113678', '-0.00112134', '-0.00110590', '-0.00108555', '-0.00104134', '-0.00096483', '-0.00086446', '-0.00075918', '-0.00065389', '-0.00054861', '-0.00044332', '-0.00033632', '-0.00022093', '-0.00009422', '0.00004086', '0.00017767', '0.00031447', '0.00045128', '0.00058809', '0.00070491', '0.00072462', '0.00061297', '0.00040422', '0.00017548', '-0.00005326', '-0.00028200', '-0.00051074', '-0.00072704', '-0.00088296', '-0.00095717', '-0.00097099', '-0.00097238', '-0.00097376', '-0.00097515', '-0.00097653', '-0.00097847', '-0.00098309', '-0.00099133', '-0.00100225', '-0.00101373', '-0.00102520', '-0.00103667', '-0.00104815', '-0.00105784', '-0.00105888', '-0.00104822', '-0.00102891', '-0.00100782', '-0.00098673', '-0.00096563', '-0.00094454', '-0.00092463', '-0.00091047', '-0.00090407', '-0.00090343', '-0.00090396', '-0.00090450', '-0.00090504', '-0.00090557', '-0.00090688', '-0.00091193', '-0.00092203', '-0.00093588', '-0.00095050', '-0.00096512', '-0.00097974', '-0.00099435', '-0.00100946', '-0.00102695', '-0.00104765', '-0.00107074', '-0.00109431', '-0.00111789', '-0.00114146', '-0.00116503', '-0.00119000', '-0.00122170', '-0.00126254', '-0.00131012', '-0.00135910', '-0.00140807', '-0.00145704', '-0.00150602', '-0.00155444', '-0.00160019', '-0.00164234', '-0.00168182', '-0.00172075', '-0.00175968', '-0.00179861', '-0.00183754', '-0.00187230', '-0.00188681', '-0.00187393', '-0.00184080', '-0.00180350', '-0.00176620', '-0.00172891', '-0.00169161', '-0.00165536', '-0.00162421', '-0.00159996', '-0.00158080', '-0.00156270', '-0.00154459', '-0.00152649', '-0.00150838', '-0.00148357', '-0.00142617', '-0.00132469', '-0.00119062', '-0.00104984', '-0.00090906', '-0.00076828', '-0.00062750', '-0.00049726', '-0.00041818', '-0.00040834', '-0.00044966', '-0.00050151', '-0.00055337', '-0.00060523', '-0.00065708', '-0.00070528', '-0.00073574', '-0.00074219', '-0.00073089', '-0.00071593', '-0.00070098', '-0.00068603', '-0.00067107', '-0.00065353', '-0.00062340', '-0.00057624', '-0.00051649', '-0.00045415', '-0.00039181', '-0.00032947', '-0.00026713', '-0.00018531', '-0.00014246']

# Define path to database for pyodrivecan package.
database = pyodrivecan.OdriveDatabase('odrive_data.db')


def get_raw_position_over_time(trial_id, node_id):
    """
    Fetches raw position and time data for a given trial_id and node_id from the database.

    Parameters:
    - trial_id (int): The trial ID to filter the data.
    - node_id (int): The node ID to filter the data.

    Returns:
    - tuple: (times, positions, trial_id, node_id) where times and positions are lists of recorded data.
             Returns None for times and positions if no data is found.
    """
    # SQL query to select time and position for a specific trial_id and node_id
    sql = """
    SELECT time, position FROM ODriveData
    WHERE trial_id = ? AND node_ID = ?
    ORDER BY time;
    """
    # Execute the query and fetch all results
    results = database.fetch(sql, (trial_id, node_id))
    
    # If results are empty, inform the user and return None
    if not results:
        print("No data found for the given trial_id and node_id.")
        return

    # Unpack the results into separate lists
    times, positions = zip(*results)
    return times, positions, trial_id, node_id

async def smooth_send_positions_to_motor(odrive1, odrive2):
     dt = 0.01
     #Run for set time delay example runs for 15 seconds.
     #stop_at = datetime.now() + timedelta(seconds=30)
     #while datetime.now() < stop_at:
     for pos1, pos2 in zip(nodeID_1_pos, nodeID_2_pos):
        odrive1.set_position(pos1)
        await asyncio.sleep(0.001)
        odrive2.set_position(pos2)
        print(f"Setting motor position to 1: {pos1}")
        print(f"Setting motor position to 2: {pos2}")
         
        await asyncio.sleep(dt)


# Function to send positions to the motor
async def send_positions_to_motor(odrive1, positions):
    """
    Sends the position commands to the motor to repeat the path.
    Parameters:
    - recorded_positions (list): The recorded positions to be used as via points.
    - total_time (float): The total time for the trajectory.
    - tacc (float): Acceleration time for the trajectory.
    - qdmax (float): Maximum speed for the trajectory.
    """
    
    #Run for set time delay example runs for 15 seconds.
    stop_at = datetime.now() + timedelta(seconds=30)
    while datetime.now() < stop_at:
        dt = 0.15
        # Iterate over the positions and send them to the motor
        for pos in positions.flatten():
            #odrive1.set_position(pos)
            print(f"Setting motor position to: {pos}") 
            await asyncio.sleep(dt)

    odrive1.running = False
    


#Example of how you can create a controller to get data from the O-Drives and then send motor comands based on that data.
async def controller(odrive1, odrive2, odrive3):
        #odrive1.set_position(0)
        #print("Set odrive to postion 0")
        #odrive2.set_position(0)
        #odrive3.set_position(0)
        # Example usage
        #recorded_times, recorded_positions, _, _ = get_raw_position_over_time(10, 1)
        
        dt = 0.125


        #Run for set time delay example runs for 15 seconds.
        stop_at = datetime.now() + timedelta(seconds=15)
        while datetime.now() < stop_at:
            await asyncio.sleep(0) #Need this for async to work.
            #print(odrive1.position, odrive2.position)
            #for pos in recorded_positions:
                #odrive1.set_position(pos)
                #await asyncio.sleep(dt)
            #print("Set odrive to postion 0")
            #await asyncio.sleep(3)
            #odrive1.set_position(3)
            #print("Set odrive to postion 3")
            #await asyncio.sleep(3)
            
    
            

        #await asyncio.sleep(15) #no longer need this the timedelta =15 runs the program for 15 seconds.
        odrive1.running = False
        odrive2.running = False
        odrive3.running = False



# Run multiple busses.
async def main():
    #Set up Node_ID 1
    odrive1 = pyodrivecan.ODriveCAN(1, closed_loop_control_flag = True)
    odrive1.initCanBus()

    #Set up Node_ID 2 
    odrive2 = pyodrivecan.ODriveCAN(2, closed_loop_control_flag = True)
    odrive2.initCanBus()

    #Set up Node_ID 3 
    odrive3 = pyodrivecan.ODriveCAN(3, closed_loop_control_flag = True)
    odrive3.initCanBus()

    # Example usage
    #recorded_times, recorded_positions, _, _ = get_raw_position_over_time(10, 1)
    #total_time = 10  # Total time to complete the path in seconds

    
    #add each odrive to the async loop so they will run.
    await asyncio.gather(
        odrive1.loop(),
        odrive2.loop(),
        odrive3.loop(),
        #controller(odrive1, odrive2, odrive3),
        smooth_send_positions_to_motor(odrive1, odrive2)
        #send_positions_to_motor(odrive1, positions)
    )

if __name__ == "__main__":
    asyncio.run(main())